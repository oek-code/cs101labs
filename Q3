package lab3;

import java.util.Scanner;

public class Lab03_Q3 {
    public static void main(String[] args) {
        Scanner input = new Scanner(System.in);

        // --- Login bilgiler ---
        String usernameStored = "librarian";
        String passwordStored = "books2024";

        // --- Başlangıç üyeler ve kitaplar ---
        String members = "JohnSmith, EmilyDavis, ZeynepDemir, ";
        String books = "ISBN9781:JavaProgramming ISBN9782:DataStructures ";

        // --- Login ---
        System.out.print("Enter your username: ");
        String username = input.nextLine();

        if (!username.equals(usernameStored)) {
            System.out.println("Username not found! Goodbye!");
            input.close();
            return;
        }

        System.out.print("Enter your password: ");
        String password = input.nextLine();

        if (!password.equals(passwordStored)) {
            System.out.println("Incorrect password! Goodbye!");
            input.close();
            return;
        }

        // --- Menü ---
        System.out.println("1- Add member");
        System.out.println("2- Delete member");
        System.out.println("3- Add book");
        System.out.println("4- Delete book");
        System.out.println("5- Logout");
        System.out.print("Select an operation: ");
        int choice = input.nextInt();
        input.nextLine(); // buffer temizliği

        if (choice == 1) {
            System.out.println("-- Add Member --");
            System.out.print("Enter member name: ");
            String newMember = input.nextLine();
            if (members.contains(newMember + ",")) {
                System.out.println("This member is already in your list!");
            } else {
                members += newMember + ", ";
                System.out.println("New member " + newMember + " is added!");
            }
            System.out.println("Your members: (" + members + ")");
        } 
        else if (choice == 2) {
            System.out.println("-- Delete Member --");
            System.out.print("Enter member name which you want to delete: ");
            String delMember = input.nextLine();
            if (members.contains(delMember + ",")) {
                members = members.replace(delMember + ", ", "");
                System.out.println(delMember + " is deleted successfully from members!");
            } else {
                System.out.println("You don't have any member whose name is " + delMember + "!");
            }
            System.out.println("Your members: (" + members + ")");
        } 
        else if (choice == 3) {
            System.out.println("-- Add Book --");
            System.out.print("Enter book name: ");
            String newBookName = input.nextLine();

            // Math.random() ile ISBN oluştur (9000–9999)
            int isbn;
            while (true) {
                isbn = 9000 + (int)(Math.random() * 1000);
                if (!books.contains("ISBN" + isbn)) break;
            }

            books += "ISBN" + isbn + ":" + newBookName + " ";
            System.out.println("New book with ISBN " + isbn + " is added!");
            System.out.println("Your books: " + books);
        } 
        else if (choice == 4) {
            System.out.println("-- Delete Book --");
            System.out.print("Enter ISBN which you want to delete: ");
            String deleteISBN = input.nextLine();
            if (books.contains("ISBN" + deleteISBN)) {
                int start = books.indexOf("ISBN" + deleteISBN);
                int end = books.indexOf(" ", start);
                String toDelete = books.substring(start, end + 1);
                books = books.replace(toDelete, "");
                System.out.println("The book with the ISBN " + deleteISBN + " is deleted successfully!");
            } else {
                System.out.println("You don't have any book with the ISBN " + deleteISBN + "!");
            }
            System.out.println("Your books: " + books);
        } 
        else if (choice == 5) {
            System.out.println("Logged out successfully!");
        } 
        else {
            System.out.println("Invalid selection!");
        }

        input.close();
    }
}
